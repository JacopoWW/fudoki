<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fudoki</title>
  <link rel="stylesheet" href="static/styles.css">
  <link rel="icon" type="image/png" href="static/logo.png">
</head>
<body id="reading-mode">
  <!-- 顶部导航 -->
  <header class="header">
    <div class="header-content">
      <!-- 移动端菜单按钮 -->
      <button class="mobile-menu-btn" id="mobileMenuBtn" title="打开菜单">
        <svg class="menu-icon" viewBox="0 0 24 24" fill="currentColor">
          <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
        </svg>
      </button>
      
      <!-- 移动端播放按钮 -->
      <button class="mobile-play-btn" id="mobilePlayBtn" title="播放全文">
        <svg class="play-icon" viewBox="0 0 24 24" fill="currentColor">
          <path d="M8 5v14l11-7z"/>
        </svg>
      </button>
      
      <!-- 移动端设置按钮 -->
      <button class="mobile-settings-btn" id="mobileSettingsBtn" title="打开设置">
        <svg class="settings-icon" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.82,11.69,4.82,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
        </svg>
      </button>
      
      <a href="#" class="logo"><img src="static/logo.png" alt="Fudoki" class="logo-icon"><span class="logo-text" id="logoText">Fudoki</span></a>
      <nav class="nav-menu">
        <button class="nav-item" id="openSettingsBtn" title="系统设置">设置</button>
        <a href="https://kotoba.iamcheyan.com/" target="_blank" class="nav-item" >kotoba</a>
        <a href="https://terebi.iamcheyan.com/" target="_blank" class="nav-item" >terebi</a>
        <a href="https://github.com/iamcheyan/fudoki" target="_blank" class="nav-item theme-icon-btn" id="GitHub" aria-label="GitHub" title="GitHub">
          <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" fill="currentColor"><path d="M12 .5a11.5 11.5 0 0 0-3.64 22.42c.58.11.8-.25.8-.56v-2.02c-3.26.71-3.95-1.4-3.95-1.4-.53-1.36-1.3-1.72-1.3-1.72-1.06-.72.08-.71.08-.71 1.18.08 1.8 1.21 1.8 1.21 1.04 1.79 2.73 1.27 3.4.97.11-.76.41-1.27.75-1.56-2.6-.3-5.33-1.3-5.33-5.8 0-1.28.46-2.32 1.21-3.14-.12-.3-.52-1.52.11-3.17 0 0 .98-.31 3.2 1.2.94-.26 1.95-.39 2.95-.39s2.01.13 2.95.39c2.22-1.51 3.19-1.2 3.19-1.2.64 1.65.24 2.87.12 3.17.76.82 1.21 1.86 1.21 3.14 0 4.51-2.73 5.5-5.34 5.79.42.36.8 1.08.8 2.18v3.23c0 .31.21.68.81.56A11.5 11.5 0 0 0 12 .5Z"></path></svg>
        </a>
      </nav>
    </div>
  </header>

  <!-- 主要内容区域 -->
  <div class="main-container">
    <!-- 最左列 - 文件夹管理 -->
    <aside class="sidebar-left" id="sidebar-left">
      <div class="sidebar-content">
        <div class="sidebar-title" id="sidebarFolderTitle">文件夹管理</div>
        <div class="folder-list" id="folderList">
          <!-- 文件夹列表由 JS 生成 -->
        </div>
      </div>
    </aside>
   
   <!-- 中间列 - 文档列表 -->
    <section class="list-panel" id="listPanel">
      <div class="list-content">
        <div class="sidebar-title" id="sidebarDocsTitle">文档列表</div>
        <div class="doc-list" id="documentList">
          <!-- 文档列表由 JS 生成 -->
        </div>
        <div class="doc-actions">
          <button class="new-doc-btn" id="newDocBtn">+ 新建文档</button>
          <button class="delete-doc-btn" id="deleteDocBtn" disabled>删除文档</button>
        </div>
      </div>
    </section>

    <!-- 右侧列 - 内容区域 -->
    <main class="content-main">
      <!-- 输入区域 -->
      <section class="input-section">
        <div class="input-group">
          <textarea id="textInput" placeholder="在此输入日语文本进行分析..."></textarea>
          <!-- 移除分析按钮：改为在文本域失去焦点且结构变化时自动解析 -->
        </div>
      </section>

      <!-- 结果显示区域 -->
      <section class="content-area" id="content">
        <div class="empty-state">
          <p id="emptyText">请在上方输入日语文本，点击"分析文本"开始处理</p>
        </div>
      </section>
    </main>

    <!-- 设置弹窗 -->
    <div class="settings-modal" id="settingsModal">
      <div class="settings-modal-content">
        <!-- 弹窗标题栏 -->
        <div class="settings-modal-header">
          <div class="settings-modal-title">
            <svg class="settings-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.82,11.69,4.82,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
            </svg>
            <span id="voiceTitle">系统设置</span>
          </div>
          <button class="settings-modal-close" id="settingsModalClose" title="关闭">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
            </svg>
          </button>
        </div>
      
      <!-- 工具栏内容 -->
       <div class="toolbar-content">
         <!-- 语音设置 -->
         <div class="settings-section">
           <div class="sidebar-title" id="voiceSettingsTitle">语音设置</div>
           <div class="voice-controls">
             <div class="control-group">
               <label class="control-label" id="voiceSelectLabel">语音选择</label>
               <select id="voiceSelect">
                 <option value="">选择语音...</option>
               </select>
             </div>

             <div class="control-group">
               <label class="control-label" id="speedLabel">语速调节</label>
               <input type="range" id="speedRange" min="0.5" max="2" step="0.1" value="1">
               <div class="speed-display" id="speedValue">1.0x</div>
             </div>

             <button class="play-all-btn" id="playAllBtn">播放全文</button>
           </div>
         </div>

         <!-- 显示设置 -->
         <div class="settings-section">
           <div class="sidebar-title" id="displayTitle">显示设置</div>
           <div class="display-controls">
             <div class="control-group">
               <label class="control-label" id="showKanaLabel">
                 <input type="checkbox" id="showKana" checked>
                 显示假名
               </label>
             </div>
             
             <div class="control-group">
               <label class="control-label" id="showRomajiLabel">
                 <input type="checkbox" id="showRomaji" checked>
                 显示罗马音
               </label>
             </div>
             
             <div class="control-group">
               <label class="control-label" id="showPosLabel">
                 <input type="checkbox" id="showPos" checked>
                 显示词性
               </label>
             </div>
             
             <div class="control-group">
               <label class="control-label" id="autoReadLabel">
                 <input type="checkbox" id="autoRead">
                 自动朗读
               </label>
             </div>
             
             <div class="control-group">
               <label class="control-label" id="repeatPlayLabel">
                 <input type="checkbox" id="repeatPlay">
                 重复播放
               </label>
             </div>
           </div>
         </div>

         <!-- 系统设置 -->
         <div class="settings-section">
           <div class="sidebar-title" id="systemTitle">系统设置</div>
           <div class="system-controls">
             <div class="control-group">
               <label class="control-label" id="themeLabel">主题模式</label>
               <select id="themeSelect" class="theme-select">
                 <option value="light">浅色模式</option>
                 <option value="dark">深色模式</option>
                 <option value="auto">跟随系统</option>
               </select>
             </div>
             
             <div class="control-group">
               <label class="control-label" id="langLabel">界面语言</label>
               <select id="langSelect" class="lang-select">
                 <option value="ja">日本語</option>
                 <option value="en">English</option>
                 <option value="zh">中文</option>
               </select>
             </div>
           </div>
         </div>
       </div>
     </div>
   </div>

   <!-- 右侧边栏 - 语音控制 (保留桌面端使用) -->
   <aside class="sidebar-right" id="sidebar-right">
     <!-- 工具栏标题栏 -->
     <div class="toolbar-header">
       <div class="toolbar-title">
         <svg class="toolbar-drag-icon" viewBox="0 0 24 24" fill="currentColor">
           <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
         </svg>
         <span id="voiceTitle">系统设置</span>
       </div>
       <button class="toolbar-minimize-btn" id="toolbarMinimize" title="最小化">
         <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
           <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
         </svg>
       </button>
     </div>
     
     <!-- 工具栏内容 -->
     <div class="toolbar-content">
       <!-- 语音设置 -->
       <div class="settings-section">
         <div class="sidebar-title" id="sidebarVoiceSettingsTitle">语音设置</div>
         <div class="voice-controls">
           <div class="control-group">
             <label class="control-label" id="sidebarVoiceSelectLabel">语音选择</label>
             <select id="sidebarVoiceSelect">
               <option value="">选择语音...</option>
             </select>
           </div>

           <div class="control-group">
             <label class="control-label" id="sidebarSpeedLabel">语速调节</label>
             <input type="range" id="sidebarSpeedRange" min="0.5" max="2" step="0.1" value="1">
             <div class="speed-display" id="sidebarSpeedValue">1.0x</div>
           </div>

           <button class="play-all-btn" id="sidebarPlayAllBtn">播放全文</button>
         </div>
       </div>

       <!-- 显示设置 -->
       <div class="settings-section">
         <div class="sidebar-title" id="sidebarDisplayTitle">显示设置</div>
         <div class="display-controls">
           <div class="control-group">
             <label class="control-label" id="sidebarShowKanaLabel">
               <input type="checkbox" id="sidebarShowKana" checked>
               显示假名
             </label>
           </div>
           
           <div class="control-group">
             <label class="control-label" id="sidebarShowRomajiLabel">
               <input type="checkbox" id="sidebarShowRomaji" checked>
               显示罗马音
             </label>
           </div>
           
           <div class="control-group">
             <label class="control-label" id="sidebarShowPosLabel">
               <input type="checkbox" id="sidebarShowPos" checked>
               显示词性
             </label>
           </div>
           
           <div class="control-group">
             <label class="control-label" id="sidebarAutoReadLabel">
               <input type="checkbox" id="sidebarAutoRead">
               自动朗读
             </label>
           </div>
           
           <div class="control-group">
             <label class="control-label" id="sidebarRepeatPlayLabel">
               <input type="checkbox" id="sidebarRepeatPlay">
               重复播放
             </label>
           </div>
         </div>
       </div>

       <!-- 系统设置 -->
       <div class="settings-section">
         <div class="sidebar-title" id="sidebarSystemTitle">系统设置</div>
         <div class="system-controls">
           <div class="control-group">
             <label class="control-label" id="sidebarThemeLabel">主题模式</label>
             <select id="sidebarThemeSelect" class="theme-select">
               <option value="light">浅色模式</option>
               <option value="dark">深色模式</option>
               <option value="auto">跟随系统</option>
             </select>
           </div>
           
           <div class="control-group">
             <label class="control-label" id="sidebarLangLabel">界面语言</label>
             <select id="sidebarLangSelect" class="lang-select">
               <option value="ja">日本語</option>
               <option value="en">English</option>
               <option value="zh">中文</option>
             </select>
           </div>
         </div>
       </div>
     </div>
     
     <!-- 高度调整手柄 -->
     <div class="toolbar-resize-handle" id="toolbarResizeHandle" title="拖拽调整高度">
       <div class="resize-handle-line"></div>
       <div class="resize-handle-line"></div>
       <div class="resize-handle-line"></div>
     </div>
   </aside>

    
  </div>

  <button type="button" class="reading-mode-toggle" id="readingModeToggle" aria-pressed="false" title="阅读模式">
    <span class="reading-toggle-icon" aria-hidden="true">
      <span class="reading-icon-lines"></span>
    </span>
  </button>

  <footer class="footer">
    <a href="https://iamcheyan.com/" target="_blank" rel="noreferrer noopener">Cheyan</a> All Rights Reserved - <a href="https://github.com/iamcheyan/fudoki" target="_blank" rel="noreferrer noopener">GitHub</a>
</footer>
  <!-- JavaScript文件 -->
  <script src="static/libs/kuromoji.js"></script>
  <script src="static/libs/kuroshiro.min.js"></script>
  <script src="static/libs/kuroshiro-analyzer-kuromoji.min.js"></script>
  <script src="static/libs/dict/dictionary-service.js"></script>
  <script src="static/segmenter.js"></script>
  <script src="static/main-js.js"></script>
</body>
</html>
